<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ğŸ¤– AiIslam - Ø¨ÙˆØª Ø°ÙƒÙŠ ÙˆÙˆØ¯ÙˆØ¯</title>
<style>
:root {
  --bg:#e0f0ff;
  --panel:#004a9f;
  --accent:#00cfff;
  --muted:#ffffff99;
  --bubble:#1f5ba0;
}
*{box-sizing:border-box;font-family:'Cairo',sans-serif;transition:0.3s all;}
html,body{margin:0;height:100%;background:var(--bg);color:#fff;overflow:hidden;}
.app{display:flex;height:100vh;gap:1px;}
.right{flex:1;display:flex;flex-direction:column;padding:20px;background:var(--panel);border-radius:16px;margin:12px;box-shadow:0 8px 25px rgba(0,0,0,0.4)}
header{display:flex;align-items:center;gap:12px;margin-bottom:12px}
header svg{filter:drop-shadow(0 0 8px var(--accent))}
h1{margin:0;font-size:26px;color:var(--accent);font-weight:800}
.small{font-size:14px;color:var(--muted);margin-top:2px}
.chat{flex:1;overflow-y:auto;padding:16px;border-radius:12px;background:rgba(255,255,255,0.05);backdrop-filter:blur(6px);scroll-behavior:smooth;box-shadow:inset 0 0 10px rgba(0,0,0,0.2)}
.chat::-webkit-scrollbar{width:8px}
.chat::-webkit-scrollbar-thumb{background:var(--accent);border-radius:8px}
.msg{display:flex;margin:10px 0;animation:fadeIn 0.4s ease forwards}
.msg.user{justify-content:flex-start}
.bubble{max-width:75%;padding:14px 18px;border-radius:18px;background:var(--bubble);font-size:15px;line-height:1.5;box-shadow:0 2px 6px rgba(0,0,0,0.4);white-space:pre-wrap;word-wrap:break-word}
.bubble.user{background:linear-gradient(90deg,var(--accent),#0080ff);color:#fff}
@keyframes fadeIn{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}
.controls{display:flex;gap:12px;margin-top:16px;align-items:center}
textarea{flex:1;padding:12px 16px;border-radius:12px;border:none;resize:none;background:rgba(255,255,255,0.08);color:inherit;font-size:15px;outline:none;box-shadow:inset 0 2px 6px rgba(0,0,0,0.3)}
button{padding:12px 18px;border:none;border-radius:12px;cursor:pointer;font-weight:600;box-shadow:0 4px 12px rgba(0,0,0,0.4);transition:0.3s all}
button#send{background:var(--accent);color:#02131c}
button#send:hover{background:#00ffff}
button.ghost{background:transparent;border:1px solid rgba(255,255,255,0.3);color:var(--muted)}
button.ghost:hover{background:rgba(255,255,255,0.1)}
</style>
</head>
<body>
<div class="app">
<div class="right">
<header>
<svg width="36" height="36" viewBox="0 0 24 24" fill="none"><path d="M12 2L3 7v6c0 5.25 3.75 9.75 9 11 5.25-1.25 9-5.75 9-11V7l-9-5z" fill="var(--accent)"/></svg>
<div>
<h1>AiIslam</h1>
<div class="small">Ø°ÙƒØ§Ø¡ Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ø°ÙƒÙŠ ÙˆÙˆØ¯ÙˆØ¯ØŒ ÙŠØªØ¹Ù„Ù… Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§ ÙˆÙŠØ¬ÙŠØ¨ Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© ÙˆØ§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©.</div>
</div>
</header>
<div id="chat" class="chat"></div>
<div class="controls">
<textarea id="input" rows="2" placeholder="ğŸ’¬ ØªØ­Ø¯Ø« Ù…Ø¹ AiIslam..."></textarea>
<div style="display:flex;flex-direction:column;gap:10px">
<button id="send">Ø¥Ø±Ø³Ø§Ù„</button>
<button id="clear" class="ghost">Ù…Ø³Ø­</button>
</div>
</div>
</div>
</div>
<script>
const chat=document.getElementById('chat');
const input=document.getElementById('input');
const send=document.getElementById('send');
const clear=document.getElementById('clear');
let history=JSON.parse(localStorage.getItem('aislam_history')||'[]');
let memoryKnowledge=JSON.parse(localStorage.getItem('aislam_memory')||'[]');
const userName='Ø¥Ø³Ù„Ø§Ù…';

const autoKnowledge = [
  {keyword:'Ø§Ù„ÙÙŠØ²ÙŠØ§Ø¡', response:'Ø§Ù„ÙÙŠØ²ÙŠØ§Ø¡: Ø¯Ø±Ø§Ø³Ø© Ø§Ù„Ù…Ø§Ø¯Ø© ÙˆØ§Ù„Ø·Ø§Ù‚Ø© ÙˆØ§Ù„Ù‚ÙˆÙ‰. ÙŠØ´Ù…Ù„ Ù…ÙŠÙƒØ§Ù†ÙŠÙƒØ§ Ø§Ù„ÙƒÙ…ØŒ Ø§Ù„Ù†Ø³Ø¨ÙŠØ©ØŒ Ø§Ù„ÙƒÙ‡Ø±ÙˆÙ…ØºÙ†Ø§Ø·ÙŠØ³ÙŠØ©ØŒ Ø§Ù„ÙÙŠØ²ÙŠØ§Ø¡ Ø§Ù„Ø­Ø±Ø§Ø±ÙŠØ©ØŒ ÙˆØ§Ù„ÙÙŠØ²ÙŠØ§Ø¡ Ø§Ù„ÙÙ„ÙƒÙŠØ©.'},
  {keyword:'Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª', response:'Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª: Ø¯Ø±Ø§Ø³Ø© Ø§Ù„Ø£Ø¹Ø¯Ø§Ø¯ØŒ Ø§Ù„Ø¬Ø¨Ø±ØŒ Ø§Ù„Ù‡Ù†Ø¯Ø³Ø©ØŒ Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØŒ Ø§Ù„Ø¥Ø­ØµØ§Ø¡ØŒ ÙˆØ§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ÙŠØ© ÙÙŠ Ø§Ù„Ø¹Ù„ÙˆÙ… ÙˆØ§Ù„Ù‡Ù†Ø¯Ø³Ø©.'},
  {keyword:'Ø§Ù„ÙÙ„Ùƒ', response:'Ø§Ù„ÙÙ„Ùƒ: Ø¯Ø±Ø§Ø³Ø© Ø§Ù„ÙƒÙˆÙ†ØŒ Ø§Ù„Ù†Ø¬ÙˆÙ…ØŒ Ø§Ù„ÙƒÙˆØ§ÙƒØ¨ØŒ Ø§Ù„Ù…Ø¬Ø±Ø§ØªØŒ Ø§Ù„Ø«Ù‚ÙˆØ¨ Ø§Ù„Ø³ÙˆØ¯Ø§Ø¡ØŒ Ø§Ù„Ù…Ø¬Ø±Ø§Øª Ø§Ù„Ø¨Ø¹ÙŠØ¯Ø©ØŒ Ø§Ù„Ù…Ø°Ù†Ø¨Ø§ØªØŒ Ø§Ù„Ø¸ÙˆØ§Ù‡Ø± Ø§Ù„ÙƒÙˆÙ†ÙŠØ©ØŒ ÙˆÙ†Ø¸Ø±ÙŠØ§Øª Ø§Ù„ÙƒÙˆÙ† Ø§Ù„Ù…Ø®ØªÙ„ÙØ©.'},
  {keyword:'Ø§Ù„ÙƒÙˆÙ†', response:'Ø§Ù„ÙƒÙˆÙ†: ÙƒÙ„ Ù…Ø§ ÙŠØ­ØªÙˆÙŠÙ‡ Ù…Ù† Ø§Ù„Ù…Ø§Ø¯Ø© ÙˆØ§Ù„Ø·Ø§Ù‚Ø© ÙˆØ§Ù„ÙØ¶Ø§Ø¡ ÙˆØ§Ù„Ø²Ù…Ù†. Ø¯Ø±Ø§Ø³Ø© Ø£ØµÙ„ Ø§Ù„ÙƒÙˆÙ†ØŒ Ø§Ù„Ø§Ù†ÙØ¬Ø§Ø± Ø§Ù„Ø¹Ø¸ÙŠÙ…ØŒ Ø§Ù„ØªÙˆØ³Ø¹ Ø§Ù„ÙƒÙˆÙ†ÙŠØŒ Ø§Ù„Ù…Ø¬Ø±Ø§ØªØŒ Ø§Ù„Ù†Ø¬ÙˆÙ…ØŒ ÙˆØ§Ù„ÙƒÙˆØ§ÙƒØ¨.'},
  {keyword:'Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©', response:'Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©: Ø¯Ø±Ø§Ø³Ø© Ø§Ù„Ù†Ø­ÙˆØŒ Ø§Ù„ØµØ±ÙØŒ Ø§Ù„Ø¨Ù„Ø§ØºØ©ØŒ Ø§Ù„Ù…Ø¹Ø§Ù†ÙŠØŒ Ø§Ù„Ù…ØµØ·Ù„Ø­Ø§ØªØŒ Ø§Ù„Ø£Ø¯Ø¨ Ø§Ù„Ø¹Ø±Ø¨ÙŠØŒ Ø§Ù„Ø´Ø¹Ø± ÙˆØ§Ù„Ù‚ØµØ©.'},
  {keyword:'Ø§Ù„Ø¨Ø±Ù…Ø¬Ø©', response:'Ø§Ù„Ø¨Ø±Ù…Ø¬Ø©: Ù„ØºØ§Øª Ø§Ù„Ø¨Ø±Ù…Ø¬Ø©ØŒ Ù‡ÙŠØ§ÙƒÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§ØªØŒ Ø§Ù„Ø®ÙˆØ§Ø±Ø²Ù…ÙŠØ§ØªØŒ ØªØ·ÙˆÙŠØ± Ø§Ù„ÙˆÙŠØ¨ØŒ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠØŒ Ø§Ù„Ø¨Ø±Ù…Ø¬ÙŠØ§Øª Ø§Ù„Ù…Ø®ØªÙ„ÙØ©.'},
  {keyword:'Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©', response:'Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©: Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„Ù„ØºØ©ØŒ Ø§Ù„Ù…ØµØ·Ù„Ø­Ø§ØªØŒ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©ØŒ Ø§Ù„ÙƒØªØ§Ø¨Ø©ØŒ Ø§Ù„Ø£Ø¯Ø¨ Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØŒ Ø§Ù„ØªØ¹Ø¨ÙŠØ±Ø§Øª Ø§Ù„Ø´Ø§Ø¦Ø¹Ø©ØŒ Ø§Ù„Ø£Ø¹Ù…Ø§Ù„ ÙˆØ§Ù„ØªÙƒÙ†ÙˆÙ„ÙˆØ¬ÙŠØ§.'},
  {keyword:'Ù…Ø±Ø­Ø¨Ø§', response:'Ù…Ø±Ø­Ø¨Ù‹Ø§! ÙƒÙŠÙ Ø­Ø§Ù„Ùƒ Ø§Ù„ÙŠÙˆÙ…ØŸ'},
  {keyword:'Ø§Ù„Ø³Ù„Ø§Ù… Ø¹Ù„ÙŠÙƒÙ…', response:'ÙˆØ¹Ù„ÙŠÙƒÙ… Ø§Ù„Ø³Ù„Ø§Ù…! Ø£Ù‡Ù„Ø§Ù‹ ÙˆØ³Ù‡Ù„Ø§Ù‹.'},
  {keyword:'ØµØ¨Ø§Ø­ Ø§Ù„Ø®ÙŠØ±', response:'ØµØ¨Ø§Ø­ Ø§Ù„Ù†ÙˆØ±! Ø£ØªÙ…Ù†Ù‰ Ù„Ùƒ ÙŠÙˆÙ…Ù‹Ø§ Ø³Ø¹ÙŠØ¯Ù‹Ø§.'},
  {keyword:'Ù…Ø³Ø§Ø¡ Ø§Ù„Ø®ÙŠØ±', response:'Ù…Ø³Ø§Ø¡ Ø§Ù„Ù†ÙˆØ±! Ø£ØªÙ…Ù†Ù‰ Ù„Ùƒ Ø£Ù…Ø³ÙŠØ© Ø±Ø§Ø¦Ø¹Ø©.'}
];
memoryKnowledge = memoryKnowledge.concat(autoKnowledge);

function save(){
  localStorage.setItem('aislam_history',JSON.stringify(history));
  localStorage.setItem('aislam_memory',JSON.stringify(memoryKnowledge));
}

function render(){
  chat.innerHTML='';
  history.forEach(m=>{
    let div=document.createElement('div');
    div.className='msg '+(m.role==='bot'?'ai':m.role);
    let b=document.createElement('div');
    b.className='bubble';
    b.textContent=m.text;
    div.appendChild(b);
    chat.appendChild(div);
  });
  chat.scrollTop=chat.scrollHeight;
}

async function learnAndRespond(text){
  const t=text.toLowerCase();
  for(const m of memoryKnowledge){
    if(t.includes(m.keyword.toLowerCase())) return m.response;
  }
  const response = await fetch('https://api.quotable.io/random')
    .then(res => res.json())
    .then(data => `ØªØ¹Ù„Ù…Øª Ø´ÙŠØ¦Ù‹Ø§ Ø¬Ø¯ÙŠØ¯Ù‹Ø§: ${text}. Ù…Ø«Ø§Ù„ Ù…Ù† Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª: ${data.content}`)
    .catch(()=>`Ù„Ù‚Ø¯ ØªØ¹Ù„Ù…Øª Ù‡Ø°Ø§ Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹ Ø¨Ø§Ù„ØªÙØµÙŠÙ„ Ø§Ù„Ø¢Ù†: ${text}`);
  const newKnowledge = {keyword:text.slice(0,50), response};
  memoryKnowledge.push(newKnowledge);
  save();
  return newKnowledge.response;
}

function addMessage(role,text){
  history.push({role,text});
  render();
  save();
}

send.onclick=async function(){
  const val=input.value.trim();
  if(!val) return;
  addMessage('user',val);
  input.value='';
  setTimeout(async ()=>{
    const reply=await learnAndRespond(val);
    addMessage('bot',reply);
  },400);
};

input.addEventListener('keypress',e=>{if(e.key==='Enter'&&!e.shiftKey){e.preventDefault();send.onclick();}});
clear.onclick=function(){if(confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ù…Ø³Ø­ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©ØŸ')){history=[];memoryKnowledge=autoKnowledge.slice();render();save();}};
render();
if(!history.length){addMessage('bot',`Ù…Ø±Ø­Ø¨Ù‹Ø§ ${userName}! Ø£Ù†Ø§ AiIslam ğŸ¤–ØŒ Ø°ÙƒØ§Ø¡ Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ø°ÙƒÙŠ ÙˆÙˆØ¯ÙˆØ¯ØŒ ØªÙ… ØªØºØ°ÙŠØªÙŠ ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§ Ø¨Ù…Ø¹Ù„ÙˆÙ…Ø§Øª ÙˆÙ…Ø¬Ø§Ù„Ø§Øª Ù…ØªØ¹Ø¯Ø¯Ø© Ø¨Ù…Ø§ ÙÙŠÙ‡Ø§ Ø§Ù„ÙƒÙˆÙ† ÙˆØ§Ù„ÙÙ„ÙƒØŒ ÙˆØ£Ø³ØªØ·ÙŠØ¹ Ø§Ù„ØªØ¹Ù„Ù… ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§.`);}
</script>
</body>
</html>