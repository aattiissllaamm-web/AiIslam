<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>🤖 AiIslam - بوت ذكي وودود</title>
<style>
:root {
  --bg:#e0f0ff;
  --panel:#004a9f;
  --accent:#00cfff;
  --muted:#ffffff99;
  --bubble:#1f5ba0;
}
*{box-sizing:border-box;font-family:'Cairo',sans-serif;transition:0.3s all;}
html,body{margin:0;height:100%;background:var(--bg);color:#fff;overflow:hidden;}
.app{display:flex;height:100vh;gap:1px;}
.right{flex:1;display:flex;flex-direction:column;padding:20px;background:var(--panel);border-radius:16px;margin:12px;box-shadow:0 8px 25px rgba(0,0,0,0.4)}
header{display:flex;align-items:center;gap:12px;margin-bottom:12px}
header svg{filter:drop-shadow(0 0 8px var(--accent))}
h1{margin:0;font-size:26px;color:var(--accent);font-weight:800}
.small{font-size:14px;color:var(--muted);margin-top:2px}
.chat{flex:1;overflow-y:auto;padding:16px;border-radius:12px;background:rgba(255,255,255,0.05);backdrop-filter:blur(6px);scroll-behavior:smooth;box-shadow:inset 0 0 10px rgba(0,0,0,0.2)}
.chat::-webkit-scrollbar{width:8px}
.chat::-webkit-scrollbar-thumb{background:var(--accent);border-radius:8px}
.msg{display:flex;margin:10px 0;animation:fadeIn 0.4s ease forwards}
.msg.user{justify-content:flex-start}
.bubble{max-width:75%;padding:14px 18px;border-radius:18px;background:var(--bubble);font-size:15px;line-height:1.5;box-shadow:0 2px 6px rgba(0,0,0,0.4);white-space:pre-wrap;word-wrap:break-word}
.bubble.user{background:linear-gradient(90deg,var(--accent),#0080ff);color:#fff}
@keyframes fadeIn{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}
.controls{display:flex;gap:12px;margin-top:16px;align-items:center}
textarea{flex:1;padding:12px 16px;border-radius:12px;border:none;resize:none;background:rgba(255,255,255,0.08);color:inherit;font-size:15px;outline:none;box-shadow:inset 0 2px 6px rgba(0,0,0,0.3)}
button{padding:12px 18px;border:none;border-radius:12px;cursor:pointer;font-weight:600;box-shadow:0 4px 12px rgba(0,0,0,0.4);transition:0.3s all}
button#send{background:var(--accent);color:#02131c}
button#send:hover{background:#00ffff}
button.ghost{background:transparent;border:1px solid rgba(255,255,255,0.3);color:var(--muted)}
button.ghost:hover{background:rgba(255,255,255,0.1)}
</style>
</head>
<body>
<div class="app">
<div class="right">
<header>
<svg width="36" height="36" viewBox="0 0 24 24" fill="none"><path d="M12 2L3 7v6c0 5.25 3.75 9.75 9 11 5.25-1.25 9-5.75 9-11V7l-9-5z" fill="var(--accent)"/></svg>
<div>
<h1>AiIslam</h1>
<div class="small">ذكاء اصطناعي ذكي وودود، يتعلم المعلومات تلقائيًا ويجيب بالعربية والإنجليزية.</div>
</div>
</header>
<div id="chat" class="chat"></div>
<div class="controls">
<textarea id="input" rows="2" placeholder="💬 تحدث مع AiIslam..."></textarea>
<div style="display:flex;flex-direction:column;gap:10px">
<button id="send">إرسال</button>
<button id="clear" class="ghost">مسح</button>
</div>
</div>
</div>
</div>
<script>
const chat=document.getElementById('chat');
const input=document.getElementById('input');
const send=document.getElementById('send');
const clear=document.getElementById('clear');
let history=JSON.parse(localStorage.getItem('aislam_history')||'[]');
let memoryKnowledge=JSON.parse(localStorage.getItem('aislam_memory')||'[]');
const userName='إسلام';

const autoKnowledge = [
  {keyword:'الفيزياء', response:'الفيزياء: دراسة المادة والطاقة والقوى. يشمل ميكانيكا الكم، النسبية، الكهرومغناطيسية، الفيزياء الحرارية، والفيزياء الفلكية.'},
  {keyword:'الرياضيات', response:'الرياضيات: دراسة الأعداد، الجبر، الهندسة، التحليل الرياضي، الإحصاء، والرياضيات التطبيقية في العلوم والهندسة.'},
  {keyword:'الفلك', response:'الفلك: دراسة الكون، النجوم، الكواكب، المجرات، الثقوب السوداء، المجرات البعيدة، المذنبات، الظواهر الكونية، ونظريات الكون المختلفة.'},
  {keyword:'الكون', response:'الكون: كل ما يحتويه من المادة والطاقة والفضاء والزمن. دراسة أصل الكون، الانفجار العظيم، التوسع الكوني، المجرات، النجوم، والكواكب.'},
  {keyword:'اللغة العربية', response:'اللغة العربية: دراسة النحو، الصرف، البلاغة، المعاني، المصطلحات، الأدب العربي، الشعر والقصة.'},
  {keyword:'البرمجة', response:'البرمجة: لغات البرمجة، هياكل البيانات، الخوارزميات، تطوير الويب، الذكاء الاصطناعي، البرمجيات المختلفة.'},
  {keyword:'اللغة الإنجليزية', response:'اللغة الإنجليزية: قواعد اللغة، المصطلحات، المحادثة، الكتابة، الأدب الإنجليزي، التعبيرات الشائعة، الأعمال والتكنولوجيا.'},
  {keyword:'مرحبا', response:'مرحبًا! كيف حالك اليوم؟'},
  {keyword:'السلام عليكم', response:'وعليكم السلام! أهلاً وسهلاً.'},
  {keyword:'صباح الخير', response:'صباح النور! أتمنى لك يومًا سعيدًا.'},
  {keyword:'مساء الخير', response:'مساء النور! أتمنى لك أمسية رائعة.'}
];
memoryKnowledge = memoryKnowledge.concat(autoKnowledge);

function save(){
  localStorage.setItem('aislam_history',JSON.stringify(history));
  localStorage.setItem('aislam_memory',JSON.stringify(memoryKnowledge));
}

function render(){
  chat.innerHTML='';
  history.forEach(m=>{
    let div=document.createElement('div');
    div.className='msg '+(m.role==='bot'?'ai':m.role);
    let b=document.createElement('div');
    b.className='bubble';
    b.textContent=m.text;
    div.appendChild(b);
    chat.appendChild(div);
  });
  chat.scrollTop=chat.scrollHeight;
}

async function learnAndRespond(text){
  const t=text.toLowerCase();
  for(const m of memoryKnowledge){
    if(t.includes(m.keyword.toLowerCase())) return m.response;
  }
  const response = await fetch('https://api.quotable.io/random')
    .then(res => res.json())
    .then(data => `تعلمت شيئًا جديدًا: ${text}. مثال من الإنترنت: ${data.content}`)
    .catch(()=>`لقد تعلمت هذا الموضوع بالتفصيل الآن: ${text}`);
  const newKnowledge = {keyword:text.slice(0,50), response};
  memoryKnowledge.push(newKnowledge);
  save();
  return newKnowledge.response;
}

function addMessage(role,text){
  history.push({role,text});
  render();
  save();
}

send.onclick=async function(){
  const val=input.value.trim();
  if(!val) return;
  addMessage('user',val);
  input.value='';
  setTimeout(async ()=>{
    const reply=await learnAndRespond(val);
    addMessage('bot',reply);
  },400);
};

input.addEventListener('keypress',e=>{if(e.key==='Enter'&&!e.shiftKey){e.preventDefault();send.onclick();}});
clear.onclick=function(){if(confirm('هل تريد مسح المحادثة؟')){history=[];memoryKnowledge=autoKnowledge.slice();render();save();}};
render();
if(!history.length){addMessage('bot',`مرحبًا ${userName}! أنا AiIslam 🤖، ذكاء اصطناعي ذكي وودود، تم تغذيتي تلقائيًا بمعلومات ومجالات متعددة بما فيها الكون والفلك، وأستطيع التعلم تلقائيًا.`);}
</script>
</body>
</html>